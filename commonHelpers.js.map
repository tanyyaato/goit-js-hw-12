{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\nconst picturesList = document.querySelector('.list');\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.list  a', {\n  captionsData: 'alt',\n});\nexport function markUpRequest(hits) {\n  const markUp = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class = \"list-item\">\n  <a href=\"${largeImageURL}\">\n    <div class = \"preview-photo\"><img src=\"${webformatURL}\" alt=\"${tags}\"></div>\n     <ul class=\"img-desc\">\n    <li>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </li>\n    <li>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </li>\n    <li>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </li>\n    <li>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n  </a>\n\n</li>`;\n      }\n    )\n    .join('');\n  picturesList.insertAdjacentHTML('beforeend', markUp);\n  lightbox.refresh();\n}\n//\n\nexport function catchError() {\n  loadMoreBtn.style.display = 'none';\n  return iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',\n    position: 'topRight',\n    closeOnClick: true,\n  });\n}\n","'use strict';\n\nimport axios from 'axios';\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45156529-f4caada2c6812495035285f69';\naxios.defaults.baseURL = URL;\nexport function searchPhotoByQuery(query, page = 1, per_page = 15) {\n  return axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    },\n  });\n}\n","'use strict';\n\nimport { markUpRequest, catchError } from './js/render-functions.js';\nimport { searchPhotoByQuery } from './js/pixabay-api.js';\nconst picturesList = document.querySelector('.list');\nconst form = document.querySelector('.js-form');\nconst warningText = document.querySelector('.end-text');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\n\nlet page = null;\nlet per_page = 15;\nlet inputValue = '';\nlet totalPage = null;\n\nloadMoreBtn.addEventListener('click', loadMore);\nform.addEventListener('submit', getRequest);\nasync function getRequest(event) {\n  event.preventDefault();\n  picturesList.innerHTML = '';\n  warningText.style.display = 'none';\n  loadMoreBtn.style.display = 'none';\n  page = 1;\n  const query = form.elements.request.value.trim().toLowerCase();\n  inputValue = query;\n\n  if (inputValue === '') {\n    return catchError();\n  }\n\n  try {\n    loader.classList.remove('loader-hidden');\n    const response = await searchPhotoByQuery(inputValue, page, per_page);\n    loader.classList.add('loader-hidden');\n    totalPage = Math.ceil(response.data.totalHits / per_page);\n\n    if (response.data.hits.length > 0) {\n      markUpRequest(response.data.hits);\n      loadMoreBtn.style.display = totalPage > 1 ? 'block' : 'none';\n    } else if (response.data.hits.length === 0) {\n      throw new Error(response.status);\n    } else {\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    console.log(error.message);\n    catchError();\n  } finally {\n    form.reset();\n    pageScroll();\n  }\n}\n\nasync function loadMore() {\n  page += 1;\n  try {\n    const response = await searchPhotoByQuery(inputValue, page, per_page);\n    markUpRequest(response.data.hits);\n\n    if (page >= totalPage) {\n      loadMoreBtn.style.display = 'none';\n      warningText.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    pageScroll();\n  }\n}\nfunction pageScroll() {\n  const itemHeight = picturesList.children[0].getBoundingClientRect().height;\n  window.scrollBy({\n    top: itemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n// dkd\n"],"names":["picturesList","loadMoreBtn","lightbox","SimpleLightbox","markUpRequest","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","catchError","iziToast","URL","API_KEY","axios","searchPhotoByQuery","query","page","per_page","form","warningText","loader","inputValue","totalPage","loadMore","getRequest","event","response","error","pageScroll","itemHeight"],"mappings":"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"}