{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\nconst picturesList = document.querySelector('.list');\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.list  a', {\n  captionsData: 'alt',\n});\nexport function markUpRequest(hits) {\n  const markUp = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class = \"list-item\">\n  <a href=\"${largeImageURL}\">\n    <div class = \"preview-photo\"><img src=\"${webformatURL}\" alt=\"${tags}\"></div>\n     <ul class=\"img-desc\">\n    <li>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </li>\n    <li>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </li>\n    <li>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </li>\n    <li>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n  </a>\n\n</li>`;\n      }\n    )\n    .join('');\n  picturesList.insertAdjacentHTML('beforeend', markUp);\n  lightbox.refresh();\n}\n//\n\nexport function catchError() {\n  loadMoreBtn.style.display = 'none';\n  return iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',\n    position: 'topRight',\n    closeOnClick: true,\n  });\n}\n","'use strict';\n\nimport axios from 'axios';\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45156529-f4caada2c6812495035285f69';\naxios.defaults.baseURL = URL;\nexport function searchPhotoByQuery(query, page = 1, per_page = 15) {\n  return axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    },\n  });\n}\n","'use strict';\n\nimport { markUpRequest, catchError } from './js/render-functions.js';\nimport { searchPhotoByQuery } from './js/pixabay-api.js';\nconst picturesList = document.querySelector('.list');\nconst form = document.querySelector('.js-form');\nconst warningText = document.querySelector('.end-text');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = null;\nlet per_page = 15;\nlet inputValue = '';\nlet totalPage = null;\n\nloadMoreBtn.addEventListener('click', loadMore);\nform.addEventListener('submit', getRequest);\nasync function getRequest(event) {\n  event.preventDefault();\n  picturesList.innerHTML = '';\n  page = 1;\n  const query = form.elements.request.value.trim().toLowerCase();\n  inputValue = query;\n  if (!inputValue) {\n    return catchError();\n  }\n  try {\n    const response = await searchPhotoByQuery(inputValue, page, per_page);\n    totalPage = Math.ceil(response.data.totalHits / per_page);\n\n    if (response.data.hits.length > 0) {\n      markUpRequest(response.data.hits);\n\n      if (response.data.totalHits > per_page) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.remove();\n        warningText.remove();\n      }\n    } else if (response.data.hits.length === 0) {\n      throw new Error(error.response);\n    }\n  } catch (error) {\n    console.log(error.message);\n    return catchError();\n  } finally {\n    form.reset();\n  }\n}\n\nasync function loadMore() {\n  page += 1;\n\n  try {\n    const response = await searchPhotoByQuery(inputValue, page, per_page);\n    markUpRequest(response.data.hits);\n    if (page >= totalPage) {\n      loadMoreBtn.removeEventListener('click', loadMore);\n      loadMoreBtn.replaceWith(warningText);\n      warningText.style.display = 'block';\n      warningText.textContent =\n        \"We're sorry, but you've reached the end of search results.\";\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["picturesList","loadMoreBtn","lightbox","SimpleLightbox","markUpRequest","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","catchError","iziToast","URL","API_KEY","axios","searchPhotoByQuery","query","page","per_page","form","warningText","inputValue","totalPage","loadMore","getRequest","event","response","error"],"mappings":"owBACA,MAAMA,EAAe,SAAS,cAAc,OAAO,EAK7CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,IAAIC,EAAe,WAAY,CAC9C,aAAc,KAChB,CAAC,EACM,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,aACFL,CAAa;AAAA,6CACmBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,WAI5DC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,WAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAOf,EACA,KAAK,EAAE,EACVb,EAAa,mBAAmB,YAAaM,CAAM,EACnDJ,EAAS,QAAO,CAClB,CAGO,SAASY,GAAa,CAC3Bb,OAAAA,EAAY,MAAM,QAAU,OACrBc,EAAS,KAAK,CACnB,QACE,2EACF,MAAO,MACP,SAAU,WACV,aAAc,EAClB,CAAG,CACH,CC5DA,MAAMC,EAAM,2BACNC,EAAU,qCAChBC,EAAM,SAAS,QAAUF,EAClB,SAASG,EAAmBC,EAAOC,EAAO,EAAGC,EAAW,GAAI,CACjE,OAAOJ,EAAM,IAAI,GAAI,CACnB,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,CACH,CCdA,MAAMtB,EAAe,SAAS,cAAc,OAAO,EAC7CuB,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAc,SAAS,cAAc,WAAW,EAChDvB,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIoB,EAAO,KACPC,EAAW,GACXG,EAAa,GACbC,EAAY,KAEhBzB,EAAY,iBAAiB,QAAS0B,CAAQ,EAC9CJ,EAAK,iBAAiB,SAAUK,CAAU,EAC1C,eAAeA,EAAWC,EAAO,CAM/B,GALAA,EAAM,eAAc,EACpB7B,EAAa,UAAY,GACzBqB,EAAO,EAEPI,EADcF,EAAK,SAAS,QAAQ,MAAM,KAAI,EAAG,cAE7C,CAACE,EACH,OAAOX,EAAU,EAEnB,GAAI,CACF,MAAMgB,EAAW,MAAMX,EAAmBM,EAAYJ,EAAMC,CAAQ,EAGpE,GAFAI,EAAY,KAAK,KAAKI,EAAS,KAAK,UAAYR,CAAQ,EAEpDQ,EAAS,KAAK,KAAK,OAAS,EAC9B1B,EAAc0B,EAAS,KAAK,IAAI,EAE5BA,EAAS,KAAK,UAAYR,EAC5BrB,EAAY,MAAM,QAAU,SAE5BA,EAAY,OAAM,EAClBuB,EAAY,OAAM,WAEXM,EAAS,KAAK,KAAK,SAAW,EACvC,MAAM,IAAI,MAAM,MAAM,QAAQ,CAEjC,OAAQC,EAAO,CACd,eAAQ,IAAIA,EAAM,OAAO,EAClBjB,EAAU,CACrB,QAAY,CACRS,EAAK,MAAK,CACX,CACH,CAEA,eAAeI,GAAW,CACxBN,GAAQ,EAER,GAAI,CACF,MAAMS,EAAW,MAAMX,EAAmBM,EAAYJ,EAAMC,CAAQ,EACpElB,EAAc0B,EAAS,KAAK,IAAI,EAC5BT,GAAQK,IACVzB,EAAY,oBAAoB,QAAS0B,CAAQ,EACjD1B,EAAY,YAAYuB,CAAW,EACnCA,EAAY,MAAM,QAAU,QAC5BA,EAAY,YACV,6DAEL,OAAQO,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACH"}