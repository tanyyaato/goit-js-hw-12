{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\nconst picturesList = document.querySelector('.list');\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst lightbox = new SimpleLightbox('.list  a', {\n  captionsData: 'alt',\n});\nexport function markUpRequest(hits) {\n  const markUp = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class = \"list-item\">\n  <a href=\"${largeImageURL}\">\n    <div class = \"preview-photo\"><img src=\"${webformatURL}\" alt=\"${tags}\"></div>\n     <ul class=\"img-desc\">\n    <li>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </li>\n    <li>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </li>\n    <li>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </li>\n    <li>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n  </a>\n\n</li>`;\n      }\n    )\n    .join('');\n  picturesList.insertAdjacentHTML('beforeend', markUp);\n  lightbox.refresh();\n}\n//\n\nexport function catchError() {\n  return iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',\n    position: 'topRight',\n    closeOnClick: true,\n  });\n}\n","'use strict';\n\nimport axios from 'axios';\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45156529-f4caada2c6812495035285f69';\naxios.defaults.baseURL = URL;\nexport function searchPhotoByQuery(query, page = 1, per_page = 15) {\n  return axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    },\n  });\n}\n","'use strict';\n\nimport { markUpRequest, catchError } from './js/render-functions.js';\nimport { searchPhotoByQuery } from './js/pixabay-api.js';\nconst picturesList = document.querySelector('.list');\nconst form = document.querySelector('.js-form');\nconst warningText = document.querySelector('.end-text');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet per_page = 15;\nlet inputValue = '';\nloadMoreBtn.addEventListener('click', loadMore);\nform.addEventListener('submit', getRequest);\nasync function getRequest(event) {\n  event.preventDefault();\n  picturesList.innerHTML = '';\n  page = 1;\n  const query = form.elements.request.value.trim().toLowerCase();\n  inputValue = query;\n  if (!inputValue) {\n    return;\n  }\n  try {\n    const response = await searchPhotoByQuery(inputValue, page, per_page);\n    if (response.data.hits.length > 0) {\n      page += 1;\n      markUpRequest(response.data.hits);\n      loadMoreBtn.style.display = 'block';\n    } else if (response.data.hits.length === 0) {\n      throw new Error(response.status);\n    }\n  } catch {\n    catchError();\n  }\n  form.reset();\n}\nasync function loadMore() {\n  const response = await searchPhotoByQuery(inputValue, page, per_page);\n  page += 1;\n\n  if (page < Math.ceil(response.data.totalHits / per_page)) {\n    markUpRequest(response.data.hits);\n    loadMoreBtn.style.display = 'block';\n  } else {\n    loadMoreBtn.removeEventListener('click', loadMore);\n    loadMoreBtn.replaceWith(warningText);\n    warningText.style.display = 'block';\n    warningText.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n  }\n}\n"],"names":["picturesList","lightbox","SimpleLightbox","markUpRequest","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","catchError","iziToast","URL","API_KEY","axios","searchPhotoByQuery","query","page","per_page","form","warningText","loadMoreBtn","inputValue","loadMore","getRequest","event","response"],"mappings":"owBACA,MAAMA,EAAe,SAAS,cAAc,OAAO,EAK7CC,EAAW,IAAIC,EAAe,WAAY,CAC9C,aAAc,KAChB,CAAC,EACM,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,aACFL,CAAa;AAAA,6CACmBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,WAI5DC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,WAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAOf,EACA,KAAK,EAAE,EACVZ,EAAa,mBAAmB,YAAaK,CAAM,EACnDJ,EAAS,QAAO,CAClB,CAGO,SAASY,GAAa,CAC3B,OAAOC,EAAS,KAAK,CACnB,QACE,2EACF,MAAO,MACP,SAAU,WACV,aAAc,EAClB,CAAG,CACH,CC1DA,MAAMC,EAAM,2BACNC,EAAU,qCAChBC,EAAM,SAAS,QAAUF,EAClB,SAASG,EAAmBC,EAAOC,EAAO,EAAGC,EAAW,GAAI,CACjE,OAAOJ,EAAM,IAAI,GAAI,CACnB,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,CACH,CCdA,MAAMrB,EAAe,SAAS,cAAc,OAAO,EAC7CsB,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIJ,EAAO,EACPC,EAAW,GACXI,EAAa,GACjBD,EAAY,iBAAiB,QAASE,CAAQ,EAC9CJ,EAAK,iBAAiB,SAAUK,CAAU,EAC1C,eAAeA,EAAWC,EAAO,CAM/B,GALAA,EAAM,eAAc,EACpB5B,EAAa,UAAY,GACzBoB,EAAO,EAEPK,EADcH,EAAK,SAAS,QAAQ,MAAM,KAAI,EAAG,cAE7C,EAACG,EAGL,IAAI,CACF,MAAMI,EAAW,MAAMX,EAAmBO,EAAYL,EAAMC,CAAQ,EACpE,GAAIQ,EAAS,KAAK,KAAK,OAAS,EAC9BT,GAAQ,EACRjB,EAAc0B,EAAS,KAAK,IAAI,EAChCL,EAAY,MAAM,QAAU,gBACnBK,EAAS,KAAK,KAAK,SAAW,EACvC,MAAM,IAAI,MAAMA,EAAS,MAAM,CAErC,MAAU,CACNhB,GACD,CACDS,EAAK,MAAK,EACZ,CACA,eAAeI,GAAW,CACxB,MAAMG,EAAW,MAAMX,EAAmBO,EAAYL,EAAMC,CAAQ,EACpED,GAAQ,EAEJA,EAAO,KAAK,KAAKS,EAAS,KAAK,UAAYR,CAAQ,GACrDlB,EAAc0B,EAAS,KAAK,IAAI,EAChCL,EAAY,MAAM,QAAU,UAE5BA,EAAY,oBAAoB,QAASE,CAAQ,EACjDF,EAAY,YAAYD,CAAW,EACnCA,EAAY,MAAM,QAAU,QAC5BA,EAAY,YACV,6DAEN"}